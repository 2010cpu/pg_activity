[tox]
envlist = check-manifest, lint, mypy, py36, py37, py38
skip_missing_interpreters = True

[travis]
python =
  3.7: check-manifest, lint, mypy, py37

[testenv]
deps =
    psycopg2-binary
    pytest
commands =
    pytest --doctest-modules {toxinidir}/pgactivity {posargs:-vv}

[testenv:check-manifest]
skip_install = True
deps =
    check-manifest
commands =
    check-manifest

[testenv:lint]
skip_install = True
deps =
    black
    flake8
commands =
    black --check {toxinidir}
    flake8 {toxinidir}

[testenv:mypy]
skip_install = True
deps =
    mypy
commands =
    mypy --strict {toxinidir}
